{"componentChunkName":"component---gatsby-theme-replica-src-templates-post-tsx","path":"/2019/04/07/线程安全延迟初始化方案/","result":{"data":{"post":{"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"线程安全延迟初始化方案\",\n  \"date\": \"2019-04-07T09:43:38.000Z\",\n  \"tags\": null,\n  \"category\": null\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Java\"), mdx(\"h2\", null, \"Initialization On Demand Holder idiom\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java\"\n  }, \"public class InstanceFactory { \\n    private static class InstanceHolder {\\n        public static Instance instance = new Instance(); \\n    } public static Instance getInstance() {\\n        return InstanceHolder.instance ;\\u3000\\u3000// \\u8FD9\\u91CC\\u5C06\\u5BFC\\u81F4InstanceHolder\\u7C7B\\u88AB\\u521D\\u59CB\\u5316  \\n    } \\n}\\n\")), mdx(\"h2\", null, \"DoubleCheckedLocking\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-java\"\n  }, \"public class SafeDoubleCheckedLocking {\\n\\n    private volatile static Instance instance; \\n\\n    public static Instance getInstance() { \\n        if (instance == null) { \\n            synchronized (SafeDoubleCheckedLocking.class) { \\n                if (instance == null) instance = new Instance(); // instance\\u4E3Avolatile\\uFF0C\\u73B0\\u5728\\u6CA1\\u95EE\\u9898\\u4E86 \\n            } \\n        } \\n        return instance;\\n    }\\n}\\n\")), mdx(\"h2\", null, \"\\u7ED3\\u8BED\"), mdx(\"p\", null, \"\\u5B57\\u6BB5\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\u964D\\u4F4E\\u4E86\\u521D\\u59CB\\u5316\\u7C7B\\u6216\\u521B\\u5EFA\\u5B9E\\u4F8B\\u7684\\u5F00\\u9500\\uFF0C\\u4F46\\u589E\\u52A0\\u4E86\\u8BBF\\u95EE\\u88AB\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\u7684\\u5B57\\u6BB5 \\u7684\\u5F00\\u9500\\u3002\\u5728\\u5927\\u591A\\u6570\\u65F6\\u5019\\uFF0C\\u6B63\\u5E38\\u7684\\u521D\\u59CB\\u5316\\u8981\\u4F18\\u4E8E\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\u3002\\u5982\\u679C\\u786E\\u5B9E\\u9700\\u8981\\u5BF9\\u5B9E\\u4F8B\\u5B57\\u6BB5\\u4F7F\\u7528\\u7EBF\\u7A0B \\u5B89\\u5168\\u7684\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\uFF0C\\u8BF7\\u4F7F\\u7528\\u4E0A\\u9762\\u4ECB\\u7ECD\\u7684\\u57FA\\u4E8Evolatile\\u7684\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\u7684\\u65B9\\u6848\\uFF1B\\u5982\\u679C\\u786E\\u5B9E\\u9700\\u8981\\u5BF9\\u9759 \\u6001\\u5B57\\u6BB5\\u4F7F\\u7528\\u7EBF\\u7A0B\\u5B89\\u5168\\u7684\\u5EF6\\u8FDF\\u521D\\u59CB\\u5316\\uFF0C\\u8BF7\\u4F7F\\u7528\\u4E0A\\u9762\\u4ECB\\u7ECD\\u7684\\u57FA\\u4E8E\\u7C7B\\u521D\\u59CB\\u5316\\u7684\\u65B9\\u6848\\u3002\"), mdx(\"h1\", null, \"c++\"), mdx(\"h2\", null, \"c++\\u4E2D\\u7684\\u5E38\\u89C1\\u5355\\u4F8B\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cpp\"\n  }, \"class Singleton {\\npublic:\\n    static Singleton &GetInstance();\\nprivate:\\n    Singleton();\\n    ~Singleton();\\n    Singleton(const Singleton &);\\n    const Singleton &opertor = (const Singleton &);\\n\\n}\\n\\nSingleton &Singleton::GetInstance() {\\n    static Singleton instance;\\n    return instance;\\n}\\n\")), mdx(\"h2\", null, \"DoubleCheckedLocking\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cpp\"\n  }, \"Singleton &Singleton::GetInstance() {\\n    static Singleton *instance = nullptr;\\n\\n    if (!instance) {\\n        Mutex mutex;\\n        ScopedLock lock(&mutex);\\n\\n\\n        if (!instance) {\\n            instance = new Singleton();\\n        }\\n    }\\n\\n    return *instance;\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Java Initialization On Demand Holder idiom DoubleCheckedLocking…","fields":{"slug":"/2019/04/07/线程安全延迟初始化方案/"},"frontmatter":{"date":"2019-04-07T09:43:38.000Z","title":"线程安全延迟初始化方案","tags":null,"category":null},"tableOfContents":{"items":[{"url":"#java","title":"Java","items":[{"url":"#initialization-on-demand-holder-idiom","title":"Initialization On Demand Holder idiom"},{"url":"#doublecheckedlocking","title":"DoubleCheckedLocking"},{"url":"#结语","title":"结语"}]},{"url":"#c","title":"c++","items":[{"url":"#c中的常见单例","title":"c++中的常见单例"},{"url":"#doublecheckedlocking-1","title":"DoubleCheckedLocking"}]}]},"timeToRead":1}},"pageContext":{"postID":"4735e17f-b115-598f-b8fb-d80b8812407b","numericId":10,"prevPost":{"slug":"/2019/04/07/happens-before规则/","title":"happens-before规则"},"nextPost":{"slug":"/2019/05/18/弱冠赋/","title":"弱冠赋"},"permalink":"https://www.abellee.cn/2019/04/07/线程安全延迟初始化方案/"}},"staticQueryHashes":["2873555300","3400548236","822196256"]}