{"version":3,"sources":["webpack:///../gatsby-theme-replica/src/templates/categories.tsx"],"names":["CategoriesTemplate","_ref","data","categories","useMemo","Object","entries","allMdx","nodes","reduce","acc","posts","category","frontmatter","UNCATEGORIZED","count","React","createElement","Layout","mode","LayoutMode","NavTab","map","_ref2","key","Link","to","CATEGORY_DIR","slugify"],"mappings":"4FAAA,gFA6DeA,UA9BuBC,IAAc,IAAb,KAAEC,GAAMD,EAE7C,MAAME,EAAaC,kBACjB,IACEC,OAAOC,QACLJ,EAAKK,OAAOC,MAAMC,OAA+B,CAACC,EAAKC,KACrD,MAAMC,EAAWD,EAAME,YAAYD,UAAYE,gBACzCC,EAAQL,EAAIE,IAAa,EAE/B,OADAF,EAAIE,GAAYG,EAAQ,EACjBL,GACN,KAEP,IAGF,OACEM,IAAAC,cAACC,IAAM,CAACC,KAAMC,IAAWC,QACvBL,IAAAC,cAAA,UACGd,EAAWmB,IAAIC,IAAA,IAAEX,EAAUG,GAAMQ,EAAA,OAChCP,IAAAC,cAAA,MAAIO,IAAKZ,GACPI,IAAAC,cAACQ,IAAI,CAACC,GAAE,IAAMC,eAAY,IAAIC,kBAAQhB,IACnCA,EAAS,KAAGG,EAAM","file":"component---gatsby-theme-replica-src-templates-categories-tsx-59d6ca8b8510ae965859.js","sourcesContent":["import { Link, graphql } from 'gatsby';\nimport React, { FC, useMemo } from 'react';\n\nimport Layout, { LayoutMode } from '../components/Layout';\nimport { CATEGORY_DIR, UNCATEGORIZED } from '../constants/key';\nimport { slugify } from '../utils/slugify';\n\nexport const query = graphql`\n  query CategoryListQuery {\n    allMdx(filter: { slug: { ne: \"README\" }, frontmatter: {category: { ne: \"nothing\" } } }) {\n      nodes {\n        frontmatter {\n          category\n        }\n      }\n    }\n  }\n`;\n\ninterface Props {\n  data: {\n    allMdx: {\n      nodes: {\n        frontmatter: {\n          category: string;\n        };\n      }[];\n    };\n  };\n}\n\nconst CategoriesTemplate: FC<Props> = ({ data }) => {\n  // todo allow sort by alphabet & count\n  const categories = useMemo(\n    () =>\n      Object.entries(\n        data.allMdx.nodes.reduce<Record<string, number>>((acc, posts) => {\n          const category = posts.frontmatter.category || UNCATEGORIZED;\n          const count = acc[category] || 0;\n          acc[category] = count + 1;\n          return acc;\n        }, {})\n      ),\n    []\n  );\n\n  return (\n    <Layout mode={LayoutMode.NavTab}>\n      <ul>\n        {categories.map(([category, count]) => (\n          <li key={category}>\n            <Link to={`/${CATEGORY_DIR}/${slugify(category)}`}>\n              {category} ({count})\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </Layout>\n  );\n};\n\nexport default CategoriesTemplate;\n"],"sourceRoot":""}